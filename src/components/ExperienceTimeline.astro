---
// src/components/ExperienceTimeline.astro

// Example data prop - you'd pass this in from your main page or content collection
interface Props {
    experiences?: Array<{
        date: string;
        role: string;
        company: string;
        status: string;
        description: string[];
    }>;
}

const {
    experiences = [
        {
            date: "2024-PRESENT",
            role: "NETWORK OPERATIONS LEAD",
            company: "POLK STATE COLLEGE",
            status: "ongoing", // 'ongoing' or 'past'
            description: [
                "Lead network architecture design and implementation for multi-campus infrastructure.",
                "Manage security protocols and firewall configurations (Palo Alto, Fortinet).",
                "Mentor junior sysadmins and oversee Proxmox virtual environment.",
            ],
        },
        {
            date: "2022-2024",
            role: "SYSTEMS ADMINISTRATOR",
            company: "PREVIOUS CORP",
            status: "past",
            description: [
                "Automated server provisioning using Ansible and Bash scripts.",
                "Maintained 99.99% uptime for critical Linux-based services.",
            ],
        },
    ],
} = Astro.props;
---

<div class="font-mono max-w-3xl mx-auto py-8 bg-zinc-950 p-8 rounded-xl shadow-2xl border border-zinc-900 my-8">
    <h2 class="text-2xl text-emerald-400 mb-8 tracking-tight">
        <span class="text-zinc-500">$</span> tail -f /var/log/experience
    </h2>

    <div
        class="relative space-y-8 before:absolute before:inset-0 before:ml-5 before:-translate-x-px before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-zinc-700 before:to-transparent before:content-['']">
        {
            experiences.map((job, index) => (
                <div class="relative flex items-start group is-active">
                    <div class={`absolute left-0 h-10 w-10 flex items-center justify-center`}>
                        <div
                            class={`h-3 w-3 rounded-full shadow-lg ${
                                job.status === "ongoing"
                                    ? "bg-emerald-500 animate-pulse shadow-[0_0_12px_rgba(16,185,129,0.8)]"
                                    : "bg-zinc-600 group-hover:bg-emerald-500 transition-colors duration-300"
                            }`}
                        />
                    </div>

                    <div class="ml-12 pl-4 border-l border-zinc-800 group-hover:border-emerald-500/50 transition-colors duration-300 w-full">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                            <h3 class="text-lg text-zinc-100 font-bold tracking-tight">
                                {job.role} <span class="text-emerald-400">@ {job.company}</span>
                            </h3>
                            <span class="text-sm text-zinc-500 mt-1 sm:mt-0 uppercase tracking-widest">
                                [{job.date}]
                            </span>
                        </div>

                        <ul class="mt-4 space-y-2 text-zinc-300">
                            {job.description.map((item) => (
                                <li class="flex items-start">
                                    <span class="text-emerald-500 mr-2">â†’</span>
                                    <span>{item}</span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            ))
        }
    </div>
</div>
