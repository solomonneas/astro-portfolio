---
import ProjectLayout from "../../layouts/ProjectLayout.astro";

const frontmatter = {
  title: "S³ Stack Architecture: End-to-End Security Data Flow",
  status: "Complete",
  statusType: "complete",
  origin: "Portfolio Project",
  date: "2026.02",
  techStack: ["Wazuh", "TheHive", "Cortex", "MISP", "Zeek", "Suricata", "Elasticsearch", "Docker", "Proxmox", "Ubuntu", "MCP", "Python"],
};

const stackComponents = [
  { name: "Zeek", role: "Protocol Analyzer", purpose: "Parses network traffic into structured JSON logs: HTTP requests, DNS queries, TLS handshakes, file transfers. Provides deep metadata that signature-based tools miss.", color: "#06b6d4" },
  { name: "Suricata", role: "Signature-Based NIDS", purpose: "Matches network packets against thousands of known attack signatures. Outputs eve.json alerts for confirmed threats like exploit attempts and malware downloads.", color: "#0ea5e9" },
  { name: "Wazuh", role: "SIEM / XDR", purpose: "Central nervous system. Collects logs from all endpoints and NIDS sensors, correlates events against MITRE ATT&CK rules, generates alerts, and triggers escalation workflows.", color: "#10b981" },
  { name: "TheHive", role: "Incident Response Platform", purpose: "Case management hub. Receives high-severity alerts from Wazuh, organizes them into investigation cases with tasks, observables, and analyst assignments.", color: "#f59e0b" },
  { name: "Cortex", role: "Observable Analysis Engine", purpose: "Runs automated enrichment on extracted indicators (IPs, hashes, domains). Queries VirusTotal, AbuseIPDB, and other sources via containerized analyzer plugins.", color: "#ef4444" },
  { name: "MISP", role: "Threat Intelligence Platform", purpose: "Stores and correlates Indicators of Compromise across threat feeds. Answers the critical question: have we seen this indicator before, and in what context?", color: "#ec4899" },
  { name: "Wazuh Indexer", role: "Search and Storage", purpose: "Elasticsearch fork that stores all SIEM data long-term. Powers the dashboard queries and provides the searchable archive for historical analysis.", color: "#3b82f6" },
  { name: "MCP Servers (x9)", role: "AI Integration Layer", purpose: "Model Context Protocol servers that expose every SOC tool to LLM-powered assistants. Natural language becomes a first-class interface for security operations.", color: "#8b5cf6" },
];

const highlights = [
  {
    category: "Integration Design",
    title: "Wazuh-to-TheHive Bridge",
    scenario: "Wazuh generates hundreds of alerts daily, but only high-severity events warrant full incident investigation in TheHive",
    solution: "Built a custom Python script (custom-w2thive.py) on the Wazuh Manager that filters alerts by severity threshold, transforms them to TheHive's JSON format, and POSTs them via API. Analysts see pre-triaged alerts ready for case promotion.",
    impact: "Eliminated manual alert copy-paste between platforms. High-priority events arrive in TheHive within seconds of detection.",
  },
  {
    category: "Architecture Choice",
    title: "Dual NIDS Strategy: Zeek + Suricata",
    scenario: "Signature-based detection catches known threats but misses novel attacks. Protocol analysis catches anomalies but generates noise without context.",
    solution: "Deployed both tools on the same SPAN port. Suricata handles signature matching while Zeek provides deep protocol metadata. Both output JSON logs consumed by a local Wazuh Agent, giving the SIEM two complementary views of every packet.",
    impact: "Coverage spans both known signatures and behavioral anomalies. Correlation in Wazuh combines both data streams for richer alert context.",
  },
  {
    category: "AI Integration",
    title: "9 MCP Servers for Full-Stack AI Access",
    scenario: "SOC analysts juggle 5+ web dashboards during investigations. Context switching between tools slows triage and increases cognitive load.",
    solution: "Built MCP servers for each platform (Wazuh, TheHive, Cortex, MISP, plus supporting tools). Each server exposes the platform's API as structured tools that any LLM can invoke through the Model Context Protocol.",
    impact: "An AI assistant can query alerts, create cases, run enrichment, and check threat intel in a single conversation. Analysts stay in one interface.",
  },
  {
    category: "Data Flow",
    title: "Zero-Gap Alert Pipeline",
    scenario: "Security data sitting in isolated tools creates blind spots. An alert in Wazuh means nothing if the analyst cannot quickly check threat intel or run enrichment.",
    solution: "Designed the stack so data flows in one direction without manual intervention: Network Traffic to NIDS to SIEM to IR to Analysis to Threat Intel. Each transition is API-driven and automated.",
    impact: "A suspicious packet on the wire can become an enriched, contextualized incident case in under 60 seconds with no human intervention required.",
  },
];

const skills = [
  { name: "Security Architecture", items: ["Multi-tier SOC design", "Defense-in-depth strategy", "API-driven integration", "Data flow optimization"] },
  { name: "Network Security", items: ["SPAN/mirror port config", "Dual NIDS deployment", "Protocol analysis", "Signature management"] },
  { name: "SIEM Engineering", items: ["Log correlation rules", "MITRE ATT&CK mapping", "Alert threshold tuning", "Custom decoder writing"] },
  { name: "Incident Response", items: ["Case management workflows", "Observable enrichment", "Threat intel correlation", "Automated triage"] },
  { name: "AI/MCP Integration", items: ["MCP server development", "API abstraction layers", "Tool-use patterns", "Natural language interfaces"] },
  { name: "Infrastructure", items: ["Proxmox virtualization", "VLAN segmentation", "JVM tuning", "Docker orchestration"] },
];

const mcpServers = [
  { name: "wazuh-mcp", target: "Wazuh SIEM", desc: "Query alerts, search events, check agent status", color: "#10b981" },
  { name: "thehive-mcp", target: "TheHive", desc: "Create cases, manage tasks, search history", color: "#f59e0b" },
  { name: "cortex-mcp", target: "Cortex", desc: "Run analyzers, retrieve enrichment reports", color: "#ef4444" },
  { name: "misp-mcp", target: "MISP", desc: "Search IoCs, correlate threat intel, query feeds", color: "#ec4899" },
  { name: "zeek-mcp", target: "Zeek Logs", desc: "Search connection logs, DNS queries, HTTP metadata", color: "#06b6d4" },
  { name: "suricata-mcp", target: "Suricata", desc: "Query signature alerts, rule management", color: "#0ea5e9" },
  { name: "elastic-mcp", target: "Elasticsearch", desc: "Raw index queries, historical data search", color: "#3b82f6" },
  { name: "sigma-mcp", target: "Sigma Rules", desc: "Search and convert detection rules across formats", color: "#a855f7" },
  { name: "pcap-mcp", target: "Packet Capture", desc: "Retrieve and analyze stored network captures", color: "#6366f1" },
];
---

<ProjectLayout frontmatter={frontmatter}>
  <div class="github-callout">
    <div class="github-content">
      <div class="github-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
        </svg>
      </div>
      <div class="github-text">
        <span class="github-label">Open Source</span>
        <p class="github-desc">S³ Stack monorepo with MCP servers, playbooks, and deployment automation</p>
      </div>
    </div>
    <div class="github-actions">
      <a href="https://github.com/solomonneas/soc-stack" target="_blank" class="github-btn repo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" width="16" height="16">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/>
        </svg>
        <span>View Repository</span>
      </a>
      <a href="https://github.com/solomonneas/soc-stack/stargazers" target="_blank" class="github-btn star">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" width="16" height="16">
          <path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"/>
        </svg>
        <span>Star on GitHub</span>
      </a>
    </div>
  </div>

  <h2>// Overview</h2>
  <p>
    This is the architecture deep-dive for a production Security Operations Center built entirely with open-source
    tools. While the <a href="/projects/designing-and-building-an-open-source-soc">companion project page</a> covers
    the deployment and institutional value, this page focuses on one thing: how data moves through the stack from
    the moment a packet hits the wire to the moment an analyst closes an incident case.
  </p>
  <p>
    What makes this architecture distinctive is the AI integration layer. Nine MCP (Model Context Protocol) servers
    expose every tool in the stack to LLM-powered assistants. The result is a SOC where natural language is a
    first-class interface, and an AI can query alerts, create cases, run enrichment, and check threat intel
    in a single conversation.
  </p>

  <!-- Stats -->
  <div class="stats-row">
    <div class="stat-card">
      <span class="stat-value">7</span>
      <span class="stat-label">Integrated VMs</span>
    </div>
    <div class="stat-card">
      <span class="stat-value">9</span>
      <span class="stat-label">MCP Servers</span>
    </div>
    <div class="stat-card">
      <span class="stat-value">6</span>
      <span class="stat-label">Pipeline Stages</span>
    </div>
    <div class="stat-card">
      <span class="stat-value">&lt;60s</span>
      <span class="stat-label">Packet to Case</span>
    </div>
  </div>

  <!-- Tech Stack -->
  <h2>// Stack Components</h2>
  <p class="section-intro">Each tool serves a specific role in the data flow pipeline:</p>
  <div class="stack-grid">
    {stackComponents.map((comp, i) => (
      <div class="stack-card" style={`--accent: ${comp.color}; --delay: ${i * 0.1}s`}>
        <div class="stack-header">
          <span class="stack-indicator"></span>
          <span class="stack-name">{comp.name}</span>
        </div>
        <div class="stack-role">{comp.role}</div>
        <p class="stack-purpose">{comp.purpose}</p>
      </div>
    ))}
  </div>

  <!-- Flow Visualization -->
  <h2>// The Data Flow</h2>
  <p class="section-intro">
    Follow a suspicious packet from the wire to a closed case. Every arrow represents an automated,
    API-driven handoff with no manual intervention required.
  </p>

  <div class="flow-diagram">
    <!-- Main Pipeline -->
    <div class="flow-pipeline">
      <div class="flow-stage" style="--color: #94a3b8">
        <div class="stage-icon">&#127760;</div>
        <div class="stage-label">Network Traffic</div>
        <div class="stage-desc">Raw packets via SPAN port</div>
      </div>

      <div class="flow-arrow-block">
        <div class="arrow-line-h"><div class="arrow-pulse"></div></div>
        <span class="arrow-text">Mirror</span>
      </div>

      <div class="flow-stage" style="--color: #06b6d4">
        <div class="stage-icon">&#128065;</div>
        <div class="stage-label">Zeek + Suricata</div>
        <div class="stage-desc">NIDS: signatures + protocol analysis</div>
        <div class="stage-tag">Detection Layer</div>
      </div>

      <div class="flow-arrow-block">
        <div class="arrow-line-h"><div class="arrow-pulse"></div></div>
        <span class="arrow-text">JSON logs</span>
      </div>

      <div class="flow-stage" style="--color: #10b981">
        <div class="stage-icon">&#128737;</div>
        <div class="stage-label">Wazuh SIEM</div>
        <div class="stage-desc">Correlate, decode, alert</div>
        <div class="stage-tag">Correlation Layer</div>
      </div>

      <div class="flow-arrow-block">
        <div class="arrow-line-h"><div class="arrow-pulse"></div></div>
        <span class="arrow-text">API/9000</span>
      </div>

      <div class="flow-stage" style="--color: #f59e0b">
        <div class="stage-icon">&#128029;</div>
        <div class="stage-label">TheHive</div>
        <div class="stage-desc">Case creation and triage</div>
        <div class="stage-tag">Response Layer</div>
      </div>

      <div class="flow-arrow-block">
        <div class="arrow-line-h"><div class="arrow-pulse"></div></div>
        <span class="arrow-text">API/9001</span>
      </div>

      <div class="flow-stage" style="--color: #ef4444">
        <div class="stage-icon">&#129504;</div>
        <div class="stage-label">Cortex</div>
        <div class="stage-desc">Automated enrichment</div>
        <div class="stage-tag">Analysis Layer</div>
      </div>

      <div class="flow-arrow-block">
        <div class="arrow-line-h bidir"><div class="arrow-pulse"></div><div class="arrow-pulse reverse"></div></div>
        <span class="arrow-text">IoC Lookup</span>
      </div>

      <div class="flow-stage" style="--color: #ec4899">
        <div class="stage-icon">&#128270;</div>
        <div class="stage-label">MISP</div>
        <div class="stage-desc">Threat intel correlation</div>
        <div class="stage-tag">Intelligence Layer</div>
      </div>
    </div>

    <!-- MCP Layer -->
    <div class="mcp-overlay">
      <div class="mcp-banner">
        <span class="mcp-banner-icon">&#129302;</span>
        <span class="mcp-banner-text">MCP Integration Layer: AI assistant can query any stage via natural language</span>
      </div>
      <div class="mcp-connectors">
        <div class="mcp-dot" style="--pos: 14%"></div>
        <div class="mcp-dot" style="--pos: 30%"></div>
        <div class="mcp-dot" style="--pos: 46%"></div>
        <div class="mcp-dot" style="--pos: 62%"></div>
        <div class="mcp-dot" style="--pos: 78%"></div>
      </div>
    </div>
  </div>

  <!-- Walkthrough -->
  <h2>// Alert Lifecycle: Packet to Closed Case</h2>
  <p class="section-intro">
    Here is what happens when a compromised endpoint attempts a Command and Control callback:
  </p>

  <div class="lifecycle">
    <div class="lifecycle-step" style="--step: 1; --color: #06b6d4">
      <div class="lc-number">1</div>
      <div class="lc-content">
        <span class="lc-title">Network Capture</span>
        <p>The NIDS VM receives mirrored traffic via the SPAN port. Suricata matches the outbound connection
          against its ET Open ruleset and flags it as a known C2 signature. Simultaneously, Zeek logs the full
          connection metadata: source IP, destination IP, port, duration, bytes transferred, and TLS certificate details.</p>
      </div>
    </div>

    <div class="lifecycle-step" style="--step: 2; --color: #10b981">
      <div class="lc-number">2</div>
      <div class="lc-content">
        <span class="lc-title">SIEM Ingestion and Correlation</span>
        <p>A Wazuh Agent on the NIDS box reads the Suricata eve.json and Zeek conn.log files, ships them to the
          Wazuh Manager via TCP/1514. The Manager decodes the logs, matches them against MITRE ATT&CK rules
          (T1071: Application Layer Protocol), and generates a high-severity alert. The alert is indexed in the
          Wazuh Indexer for long-term storage and dashboard visibility.</p>
      </div>
    </div>

    <div class="lifecycle-step" style="--step: 3; --color: #f59e0b">
      <div class="lc-number">3</div>
      <div class="lc-content">
        <span class="lc-title">Automated Escalation</span>
        <p>The custom-w2thive.py script on the Wazuh Manager detects the alert exceeds the severity threshold.
          It transforms the alert into TheHive's expected JSON schema and POSTs it to the TheHive API on port 9000.
          TheHive creates a new alert entry, ready for analyst review.</p>
      </div>
    </div>

    <div class="lifecycle-step" style="--step: 4; --color: #ef4444">
      <div class="lc-number">4</div>
      <div class="lc-content">
        <span class="lc-title">Investigation and Enrichment</span>
        <p>An analyst (or the AI assistant via MCP) promotes the alert to a full case. TheHive extracts
          observables: the destination IP, domain, and any file hashes. These observables are sent to Cortex,
          which runs containerized analyzers against VirusTotal, AbuseIPDB, and the local MISP instance.
          Enrichment reports flow back into the case automatically.</p>
      </div>
    </div>

    <div class="lifecycle-step" style="--step: 5; --color: #ec4899">
      <div class="lc-number">5</div>
      <div class="lc-content">
        <span class="lc-title">Threat Intelligence Correlation</span>
        <p>MISP checks the observables against its threat feed database. The destination IP appears in three
          separate threat reports linked to a known APT group. This context is attached to the TheHive case,
          giving the analyst (or AI) the full picture: what happened, how bad it is, and who else has seen it.</p>
      </div>
    </div>

    <div class="lifecycle-step" style="--step: 6; --color: #8b5cf6">
      <div class="lc-number">6</div>
      <div class="lc-content">
        <span class="lc-title">Resolution</span>
        <p>With full context in hand, the analyst documents findings, assigns response tasks (isolate host,
          block IP at firewall, scan for lateral movement), and closes the case. The IoCs are exported back
          to MISP to strengthen future detection. Total elapsed time from packet to enriched case: under 60 seconds.</p>
      </div>
    </div>
  </div>

  <!-- MCP Integration -->
  <h2>// MCP Integration Layer</h2>
  <p class="section-intro">
    Nine MCP servers transform the entire SOC stack into a conversational interface.
    Each server wraps a platform's REST API into structured tools that any LLM can invoke.
  </p>

  <div class="mcp-grid">
    {mcpServers.map((server, i) => (
      <div class="mcp-card" style={`--accent: ${server.color}; --delay: ${i * 0.05}s`}>
        <div class="mcp-header">
          <span class="mcp-name">{server.name}</span>
          <span class="mcp-target">{server.target}</span>
        </div>
        <p class="mcp-desc">{server.desc}</p>
      </div>
    ))}
  </div>

  <div class="mcp-examples">
    <h3>// What This Looks Like in Practice</h3>
    <div class="example-grid">
      <div class="example-card">
        <div class="example-prompt">
          <span class="prompt-icon">&#128172;</span>
          <span>"Show me critical alerts from the last 4 hours with MITRE mapping"</span>
        </div>
        <div class="example-flow">
          <span>AI &rarr; wazuh-mcp &rarr; Wazuh API &rarr; filtered, enriched alert list</span>
        </div>
      </div>
      <div class="example-card">
        <div class="example-prompt">
          <span class="prompt-icon">&#128172;</span>
          <span>"Create a case for this IP and run VirusTotal + AbuseIPDB analysis"</span>
        </div>
        <div class="example-flow">
          <span>AI &rarr; thehive-mcp (create case) &rarr; cortex-mcp (run analyzers) &rarr; enriched case</span>
        </div>
      </div>
      <div class="example-card">
        <div class="example-prompt">
          <span class="prompt-icon">&#128172;</span>
          <span>"Have we seen this file hash in any threat feeds?"</span>
        </div>
        <div class="example-flow">
          <span>AI &rarr; misp-mcp &rarr; MISP search &rarr; matching events with APT attribution</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Technical Highlights -->
  <h2>// Architecture Decisions</h2>
  <div class="highlights-grid">
    {highlights.map((item, i) => (
      <div class="highlight-card" style={`--delay: ${i * 0.1}s`}>
        <div class="highlight-header">
          <span class="highlight-category">{item.category}</span>
          <span class="highlight-title">{item.title}</span>
        </div>
        <div class="highlight-body">
          <div class="highlight-row">
            <span class="row-label">Problem:</span>
            <span class="row-value">{item.scenario}</span>
          </div>
          <div class="highlight-row">
            <span class="row-label">Solution:</span>
            <span class="row-value">{item.solution}</span>
          </div>
          <div class="highlight-row impact">
            <span class="row-label">Result:</span>
            <span class="row-value">{item.impact}</span>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- Skills -->
  <h2>// Skills Demonstrated</h2>
  <div class="skills-grid">
    {skills.map((skill) => (
      <div class="skill-card">
        <div class="skill-header">
          <span class="skill-name">{skill.name}</span>
        </div>
        <ul class="skill-items">
          {skill.items.map((item) => (
            <li>{item}</li>
          ))}
        </ul>
      </div>
    ))}
  </div>

  <!-- Status -->
  <h2>// Project Status</h2>
  <div class="status-block">
    <div class="status-indicator complete">
      <div class="status-pulse"></div>
      <span>Complete</span>
    </div>
    <ul class="status-list">
      <li><span class="check">&#10003;</span> Full SOC stack deployed and integrated</li>
      <li><span class="check">&#10003;</span> Dual NIDS (Zeek + Suricata) monitoring network</li>
      <li><span class="check">&#10003;</span> Wazuh SIEM with MITRE ATT&CK correlation</li>
      <li><span class="check">&#10003;</span> Automated Wazuh-to-TheHive alert escalation</li>
      <li><span class="check">&#10003;</span> Cortex enrichment with external analyzers</li>
      <li><span class="check">&#10003;</span> MISP threat intel feeds active</li>
      <li><span class="check">&#10003;</span> 9 MCP servers providing AI access to all tools</li>
      <li><span class="check">&#10003;</span> End-to-end data flow validated</li>
    </ul>
  </div>
</ProjectLayout>

<style>
  .section-intro { opacity: 0.85; margin-bottom: 1.5rem; }

  /* Stats Row */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .stat-card {
    background: color-mix(in srgb, currentColor 3%, transparent);
    border: 1px solid color-mix(in srgb, currentColor 10%, transparent);
    border-radius: 6px;
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
  }

  .stat-value {
    font-family: "IBM Plex Mono", monospace;
    font-size: 1.75rem;
    font-weight: 700;
    color: #10b981;
  }

  .stat-label {
    font-size: 0.75rem;
    opacity: 0.6;
    text-align: center;
  }

  /* Stack Grid */
  .stack-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
  .stack-card { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-left: 3px solid var(--accent); border-radius: 4px; padding: 1rem; animation: fadeSlideIn 0.5s ease-out both; animation-delay: var(--delay); }
  @keyframes fadeSlideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  .stack-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
  .stack-indicator { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
  @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(0.8); } }
  .stack-name { font-family: "IBM Plex Mono", monospace; font-size: 1rem; font-weight: 600; }
  .stack-role { font-family: "IBM Plex Mono", monospace; font-size: 0.75rem; color: var(--accent); margin-bottom: 0.75rem; }
  .stack-purpose { font-size: 0.8rem; opacity: 0.75; margin: 0; line-height: 1.5; }

  /* Flow Diagram */
  .flow-diagram {
    background: color-mix(in srgb, currentColor 3%, transparent);
    border: 1px solid color-mix(in srgb, currentColor 10%, transparent);
    border-radius: 8px;
    padding: 2rem;
    margin: 1.5rem 0;
    overflow-x: auto;
  }

  .flow-pipeline {
    display: flex;
    align-items: center;
    gap: 0;
    min-width: 900px;
    padding-bottom: 1rem;
  }

  .flow-stage {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.35rem;
    padding: 1rem 1.25rem;
    background: color-mix(in srgb, var(--color) 10%, transparent);
    border: 2px solid color-mix(in srgb, var(--color) 40%, transparent);
    border-radius: 8px;
    min-width: 110px;
    text-align: center;
    position: relative;
    flex-shrink: 0;
  }

  .stage-icon { font-size: 1.5rem; }
  .stage-label { font-family: "IBM Plex Mono", monospace; font-size: 0.75rem; font-weight: 600; }
  .stage-desc { font-size: 0.6rem; opacity: 0.6; line-height: 1.3; }

  .stage-tag {
    position: absolute;
    bottom: -10px;
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.55rem;
    padding: 0.1rem 0.5rem;
    background: color-mix(in srgb, var(--color) 20%, transparent);
    border: 1px solid color-mix(in srgb, var(--color) 40%, transparent);
    border-radius: 10px;
    color: var(--color);
    white-space: nowrap;
  }

  .flow-arrow-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 0 0.25rem;
    flex-shrink: 0;
  }

  .arrow-line-h {
    width: 40px;
    height: 2px;
    background: color-mix(in srgb, currentColor 15%, transparent);
    position: relative;
    overflow: hidden;
  }

  .arrow-line-h.bidir { height: 4px; }

  .arrow-pulse {
    position: absolute;
    width: 12px;
    height: 2px;
    background: #10b981;
    top: 0;
    animation: flowRight 1.5s ease-in-out infinite;
  }

  .arrow-pulse.reverse {
    top: 2px;
    animation: flowLeft 1.5s ease-in-out infinite 0.75s;
  }

  @keyframes flowRight { 0% { left: -12px; } 100% { left: 40px; } }
  @keyframes flowLeft { 0% { left: 40px; } 100% { left: -12px; } }

  .arrow-text {
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.55rem;
    color: #10b981;
    white-space: nowrap;
  }

  /* MCP Overlay */
  .mcp-overlay {
    margin-top: 1.5rem;
    position: relative;
  }

  .mcp-banner {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    padding: 0.75rem 1.5rem;
    background: color-mix(in srgb, #8b5cf6 10%, transparent);
    border: 1px solid color-mix(in srgb, #8b5cf6 30%, transparent);
    border-radius: 6px;
  }

  .mcp-banner-icon { font-size: 1.25rem; }
  .mcp-banner-text { font-family: "IBM Plex Mono", monospace; font-size: 0.75rem; color: #8b5cf6; }

  .mcp-connectors {
    position: relative;
    height: 20px;
    width: 100%;
  }

  .mcp-dot {
    position: absolute;
    left: var(--pos);
    top: 0;
    width: 8px;
    height: 8px;
    background: #8b5cf6;
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }

  /* Lifecycle */
  .lifecycle {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin: 1.5rem 0;
    position: relative;
  }

  .lifecycle::before {
    content: "";
    position: absolute;
    left: 19px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: color-mix(in srgb, currentColor 10%, transparent);
  }

  .lifecycle-step {
    display: flex;
    gap: 1.25rem;
    padding: 1.25rem 0;
    animation: fadeSlideIn 0.5s ease-out both;
    animation-delay: calc(var(--step) * 0.1s);
  }

  .lc-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: var(--color);
    color: white;
    border-radius: 50%;
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.9rem;
    font-weight: 700;
    flex-shrink: 0;
    position: relative;
    z-index: 1;
  }

  .lc-content {
    flex: 1;
    padding-top: 0.5rem;
  }

  .lc-title {
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.95rem;
    font-weight: 600;
    display: block;
    margin-bottom: 0.5rem;
    color: var(--color);
  }

  .lc-content p {
    font-size: 0.8rem;
    opacity: 0.8;
    line-height: 1.6;
    margin: 0;
  }

  /* MCP Grid */
  .mcp-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 0.75rem;
    margin: 1.5rem 0;
  }

  .mcp-card {
    background: color-mix(in srgb, currentColor 3%, transparent);
    border: 1px solid color-mix(in srgb, currentColor 10%, transparent);
    border-top: 3px solid var(--accent);
    border-radius: 6px;
    padding: 0.75rem 1rem;
    animation: fadeSlideIn 0.5s ease-out both;
    animation-delay: var(--delay);
  }

  .mcp-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .mcp-name {
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--accent);
  }

  .mcp-target {
    font-size: 0.65rem;
    opacity: 0.5;
  }

  .mcp-desc {
    font-size: 0.75rem;
    opacity: 0.7;
    margin: 0;
    line-height: 1.4;
  }

  /* MCP Examples */
  .mcp-examples {
    margin: 1.5rem 0;
  }

  .mcp-examples h3 {
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.9rem;
    margin: 0 0 1rem 0;
    opacity: 0.7;
  }

  .example-grid {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .example-card {
    background: color-mix(in srgb, currentColor 3%, transparent);
    border: 1px solid color-mix(in srgb, currentColor 10%, transparent);
    border-radius: 6px;
    overflow: hidden;
  }

  .example-prompt {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: color-mix(in srgb, #8b5cf6 8%, transparent);
    border-bottom: 1px solid color-mix(in srgb, currentColor 8%, transparent);
    font-size: 0.8rem;
    font-style: italic;
  }

  .prompt-icon { font-size: 1rem; }

  .example-flow {
    padding: 0.75rem 1rem;
  }

  .example-flow span {
    font-family: "IBM Plex Mono", monospace;
    font-size: 0.7rem;
    color: #10b981;
  }

  /* Highlights */
  .highlights-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
  .highlight-card { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-radius: 8px; overflow: hidden; animation: fadeSlideIn 0.5s ease-out both; animation-delay: var(--delay); }
  .highlight-header { display: flex; flex-direction: column; gap: 0.25rem; padding: 1rem; background: color-mix(in srgb, currentColor 3%, transparent); border-bottom: 1px solid color-mix(in srgb, currentColor 8%, transparent); }
  .highlight-category { font-family: "IBM Plex Mono", monospace; font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: #10b981; }
  .highlight-title { font-family: "IBM Plex Mono", monospace; font-size: 0.9rem; font-weight: 600; }
  .highlight-body { padding: 1rem; }
  .highlight-row { display: flex; flex-direction: column; gap: 0.25rem; margin-bottom: 0.75rem; }
  .highlight-row:last-child { margin-bottom: 0; }
  .highlight-row .row-label { font-family: "IBM Plex Mono", monospace; font-size: 0.7rem; font-weight: 600; color: #10b981; }
  .highlight-row .row-value { font-size: 0.8rem; opacity: 0.8; line-height: 1.5; }
  .highlight-row.impact .row-value { color: #10b981; font-weight: 500; opacity: 1; }

  /* Skills */
  .skills-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
  .skill-card { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-radius: 6px; overflow: hidden; }
  .skill-header { padding: 0.75rem 1rem; background: color-mix(in srgb, currentColor 3%, transparent); border-bottom: 1px solid color-mix(in srgb, currentColor 8%, transparent); }
  .skill-name { font-family: "IBM Plex Mono", monospace; font-size: 0.85rem; font-weight: 600; }
  .skill-items { list-style: none; padding: 0.75rem 1rem; margin: 0; }
  .skill-items li { font-size: 0.75rem; padding: 0.3rem 0; padding-left: 1rem; position: relative; opacity: 0.75; }
  .skill-items li::before { content: ">"; position: absolute; left: 0; color: #10b981; font-family: "IBM Plex Mono", monospace; }

  /* Status */
  .status-block { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
  .status-indicator { display: flex; align-items: center; gap: 0.75rem; font-family: "IBM Plex Mono", monospace; font-size: 0.9rem; font-weight: 500; margin-bottom: 1rem; }
  .status-indicator.complete .status-pulse { background: #10b981; box-shadow: 0 0 10px rgba(16, 185, 129, 0.5); }
  .status-pulse { width: 12px; height: 12px; border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
  .status-list { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 0.5rem; }
  .status-list li { display: flex; align-items: center; gap: 0.5rem; font-size: 0.8rem; padding: 0.5rem 0.75rem; background: color-mix(in srgb, currentColor 3%, transparent); border-radius: 4px; }
  .check { color: #10b981; font-weight: bold; }

  /* Responsive */
  @media (max-width: 768px) {
    .flow-pipeline { min-width: unset; flex-direction: column; gap: 0.5rem; }
    .flow-arrow-block { transform: rotate(90deg); padding: 0.25rem 0; }
    .highlights-grid, .stack-grid, .mcp-grid { grid-template-columns: 1fr; }
    .stats-row { grid-template-columns: repeat(2, 1fr); }
    .flow-diagram { padding: 1rem; }
  }
  .github-callout {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: 1rem 1.25rem;
    margin: 1.5rem 0;
    background: color-mix(in srgb, currentColor 3%, transparent);
    border: 1px solid color-mix(in srgb, currentColor 10%, transparent);
    border-left: 3px solid #6e5494;
    border-radius: 6px;
    flex-wrap: wrap;
  }
  .github-content { display: flex; align-items: center; gap: 1rem; }
  .github-icon {
    flex-shrink: 0; width: 32px; height: 32px; padding: 6px;
    background: color-mix(in srgb, #6e5494 15%, transparent);
    border-radius: 6px; color: #6e5494;
  }
  .github-icon svg { width: 100%; height: 100%; }
  .github-text { display: flex; flex-direction: column; gap: 0.15rem; }
  .github-label { font-family: "IBM Plex Mono", monospace; font-size: 0.85rem; font-weight: 600; color: #6e5494; }
  .github-desc { font-size: 0.75rem; opacity: 0.6; margin: 0; }
  .github-actions { display: flex; flex-wrap: wrap; gap: 0.75rem; }
  .github-btn {
    display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem;
    font-family: "IBM Plex Mono", monospace; font-size: 0.75rem; font-weight: 500;
    text-decoration: none; border-radius: 4px; transition: all 0.2s ease;
  }
  .github-btn.repo {
    background: color-mix(in srgb, currentColor 5%, transparent);
    border: 1px solid color-mix(in srgb, currentColor 15%, transparent); color: currentColor;
  }
  .github-btn.repo:hover {
    background: color-mix(in srgb, currentColor 10%, transparent);
    border-color: color-mix(in srgb, currentColor 25%, transparent);
  }
  .github-btn.star {
    background: color-mix(in srgb, #f59e0b 15%, transparent);
    border: 1px solid color-mix(in srgb, #f59e0b 30%, transparent); color: #f59e0b;
  }
  .github-btn.star:hover { background: color-mix(in srgb, #f59e0b 25%, transparent); border-color: #f59e0b; }
</style>
