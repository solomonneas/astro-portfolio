---
import ProjectLayout from "../../layouts/ProjectLayout.astro";

const frontmatter = {
  title: "AI Invaders: Space Invaders Clone",
  status: "Complete",
  statusType: "complete",
  origin: "Portfolio Project",
  date: "2025.02",
  techStack: ["HTML5", "Canvas API", "JavaScript", "Web Audio API", "CSS"],
};

const stackComponents = [
  { name: "HTML5 Canvas", role: "Rendering Engine", purpose: "2D game rendering with requestAnimationFrame loop, sprite drawing, and collision detection on a fixed 800x600 internal resolution", color: "#e34c26" },
  { name: "Vanilla JavaScript", role: "Game Engine", purpose: "Zero-dependency game logic including entity management, state machines, input handling, and deltaTime-based physics", color: "#f7df1e" },
  { name: "Web Audio API", role: "Sound System", purpose: "Programmatic sound effect synthesis using oscillators and gain envelopes, eliminating the need for audio file assets", color: "#8b5cf6" },
  { name: "CSS", role: "Layout & Scaling", purpose: "Responsive canvas scaling with aspect ratio preservation and touch control overlays for mobile devices", color: "#264de4" },
];

const highlights = [
  {
    category: "Game Engine",
    title: "DeltaTime Physics System",
    scenario: "Games using requestAnimationFrame run at different speeds on 60Hz vs 144Hz monitors",
    solution: "Implemented frame-independent physics where all movement, animation, and timing values multiply by deltaTime (elapsed seconds since last frame). Entity velocities are defined in pixels-per-second rather than pixels-per-frame",
    impact: "Consistent gameplay experience across all display refresh rates and performance levels",
  },
  {
    category: "Boss Design",
    title: "Three-Phase Grok Boss Fight",
    scenario: "A simple shoot-everything game needs a memorable climax to create replay value",
    solution: "Designed a three-phase boss with distinct attack patterns: Phase 1 sweeping laser beams, Phase 2 scatter-shot fan projectiles, Phase 3 combines both with a charging dash. Each phase has its own health pool with visual degradation and invulnerability transitions",
    impact: "Escalating difficulty curve that tests different player skills in each phase",
  },
  {
    category: "Audio",
    title: "Synthesized Sound Effects",
    scenario: "Loading audio files would break the single-file, zero-dependency constraint",
    solution: "Used AudioContext oscillators with frequency sweeps for laser shots, white noise with low-frequency thumps for explosions, and chord progressions for boss phase transitions. All sounds shaped with gain envelopes for natural attack/decay",
    impact: "Full audio feedback without a single external asset file",
  },
  {
    category: "Mobile",
    title: "Touch Control System",
    scenario: "Keyboard controls do not work on mobile devices, limiting the audience",
    solution: "Implemented virtual joystick (left side) and fire button (right side) using touch events with preventDefault to block scroll/zoom. Canvas scales responsively while maintaining the internal coordinate system",
    impact: "Playable on phones and tablets with responsive touch areas",
  },
];

const skills = [
  { name: "Game Development", items: ["Game loop architecture", "DeltaTime physics", "Entity management", "Collision detection"] },
  { name: "Canvas API", items: ["2D context rendering", "Sprite drawing", "Animation frames", "Responsive scaling"] },
  { name: "Web Audio", items: ["Oscillator synthesis", "Gain envelopes", "Frequency sweeps", "Real-time audio generation"] },
  { name: "Vanilla JS", items: ["Zero dependencies", "State machines", "Event handling", "Single-file architecture"] },
];
---

<ProjectLayout frontmatter={frontmatter}>
  <h2>// Overview</h2>
  <p>
    A Space Invaders clone built as a single HTML file with zero dependencies. Enemies are represented as logos
    from various AI companies, descending in classic formation patterns. The game features a three-phase boss
    fight, synthesized sound effects via the Web Audio API, and touch controls for mobile play.
  </p>
  <p>
    The entire game lives in one file: no npm, no build step, no external assets. Open it in a browser and play.
    This constraint drove architectural decisions that demonstrate core JavaScript fundamentals: manual state
    management, canvas rendering pipelines, frame-independent physics, and programmatic audio synthesis.
  </p>

  <!-- Tech Stack -->
  <h2>// Tech Stack</h2>
  <p class="section-intro">Single-file game built entirely with browser-native APIs:</p>
  <div class="stack-grid">
    {stackComponents.map((comp, i) => (
      <div class="stack-card" style={`--accent: ${comp.color}; --delay: ${i * 0.1}s`}>
        <div class="stack-header">
          <span class="stack-indicator"></span>
          <span class="stack-name">{comp.name}</span>
        </div>
        <div class="stack-role">{comp.role}</div>
        <p class="stack-purpose">{comp.purpose}</p>
      </div>
    ))}
  </div>

  <!-- Technical Highlights -->
  <h2>// Technical Highlights</h2>
  <div class="highlights-grid">
    {highlights.map((item, i) => (
      <div class="highlight-card" style={`--delay: ${i * 0.1}s`}>
        <div class="highlight-header">
          <span class="highlight-category">{item.category}</span>
          <span class="highlight-title">{item.title}</span>
        </div>
        <div class="highlight-body">
          <div class="highlight-row">
            <span class="row-label">Problem:</span>
            <span class="row-value">{item.scenario}</span>
          </div>
          <div class="highlight-row">
            <span class="row-label">Solution:</span>
            <span class="row-value">{item.solution}</span>
          </div>
          <div class="highlight-row impact">
            <span class="row-label">Result:</span>
            <span class="row-value">{item.impact}</span>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- Skills -->
  <h2>// Skills Demonstrated</h2>
  <div class="skills-grid">
    {skills.map((skill) => (
      <div class="skill-card">
        <div class="skill-header">
          <span class="skill-name">{skill.name}</span>
        </div>
        <ul class="skill-items">
          {skill.items.map((item) => (
            <li>{item}</li>
          ))}
        </ul>
      </div>
    ))}
  </div>

  <!-- Status -->
  <h2>// Project Status</h2>
  <div class="status-block">
    <div class="status-indicator complete">
      <div class="status-pulse"></div>
      <span>Complete</span>
    </div>
    <ul class="status-list">
      <li><span class="check">&#10003;</span> Full game loop with deltaTime physics</li>
      <li><span class="check">&#10003;</span> Multiple enemy types in formation</li>
      <li><span class="check">&#10003;</span> Three-phase boss fight with escalating attacks</li>
      <li><span class="check">&#10003;</span> Synthesized audio via Web Audio API</li>
      <li><span class="check">&#10003;</span> Touch controls for mobile devices</li>
      <li><span class="check">&#10003;</span> Single-file, zero-dependency deployment</li>
    </ul>
  </div>
</ProjectLayout>

<style>
  .section-intro { opacity: 0.85; margin-bottom: 1.5rem; }

  .stack-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
  .stack-card { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-left: 3px solid var(--accent); border-radius: 4px; padding: 1rem; animation: fadeSlideIn 0.5s ease-out both; animation-delay: var(--delay); }
  @keyframes fadeSlideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  .stack-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
  .stack-indicator { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
  @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.5; transform: scale(0.8); } }
  .stack-name { font-family: "IBM Plex Mono", monospace; font-size: 1rem; font-weight: 600; }
  .stack-role { font-family: "IBM Plex Mono", monospace; font-size: 0.75rem; color: var(--accent); margin-bottom: 0.75rem; }
  .stack-purpose { font-size: 0.8rem; opacity: 0.75; margin: 0; line-height: 1.5; }

  .highlights-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
  .highlight-card { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-radius: 8px; overflow: hidden; animation: fadeSlideIn 0.5s ease-out both; animation-delay: var(--delay); }
  .highlight-header { display: flex; flex-direction: column; gap: 0.25rem; padding: 1rem; background: color-mix(in srgb, currentColor 3%, transparent); border-bottom: 1px solid color-mix(in srgb, currentColor 8%, transparent); }
  .highlight-category { font-family: "IBM Plex Mono", monospace; font-size: 0.65rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: #10b981; }
  .highlight-title { font-family: "IBM Plex Mono", monospace; font-size: 0.9rem; font-weight: 600; }
  .highlight-body { padding: 1rem; }
  .highlight-row { display: flex; flex-direction: column; gap: 0.25rem; margin-bottom: 0.75rem; }
  .highlight-row:last-child { margin-bottom: 0; }
  .highlight-row .row-label { font-family: "IBM Plex Mono", monospace; font-size: 0.7rem; font-weight: 600; color: #10b981; }
  .highlight-row .row-value { font-size: 0.8rem; opacity: 0.8; line-height: 1.5; }
  .highlight-row.impact .row-value { color: #10b981; font-weight: 500; opacity: 1; }

  .skills-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1.5rem 0; }
  .skill-card { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-radius: 6px; overflow: hidden; }
  .skill-header { padding: 0.75rem 1rem; background: color-mix(in srgb, currentColor 3%, transparent); border-bottom: 1px solid color-mix(in srgb, currentColor 8%, transparent); }
  .skill-name { font-family: "IBM Plex Mono", monospace; font-size: 0.85rem; font-weight: 600; }
  .skill-items { list-style: none; padding: 0.75rem 1rem; margin: 0; }
  .skill-items li { font-size: 0.75rem; padding: 0.3rem 0; padding-left: 1rem; position: relative; opacity: 0.75; }
  .skill-items li::before { content: ">"; position: absolute; left: 0; color: #10b981; font-family: "IBM Plex Mono", monospace; }

  .status-block { background: color-mix(in srgb, currentColor 3%, transparent); border: 1px solid color-mix(in srgb, currentColor 10%, transparent); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
  .status-indicator { display: flex; align-items: center; gap: 0.75rem; font-family: "IBM Plex Mono", monospace; font-size: 0.9rem; font-weight: 500; margin-bottom: 1rem; }
  .status-indicator.complete .status-pulse { background: #10b981; box-shadow: 0 0 10px rgba(16, 185, 129, 0.5); }
  .status-pulse { width: 12px; height: 12px; border-radius: 50%; animation: pulse 2s ease-in-out infinite; }
  .status-list { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 0.5rem; }
  .status-list li { display: flex; align-items: center; gap: 0.5rem; font-size: 0.8rem; padding: 0.5rem 0.75rem; background: color-mix(in srgb, currentColor 3%, transparent); border-radius: 4px; }
  .check { color: #10b981; font-weight: bold; }

  @media (max-width: 768px) { .highlights-grid, .stack-grid { grid-template-columns: 1fr; } }
</style>
